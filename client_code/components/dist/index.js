!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.index=e():t.index=e()}(this,(()=>(()=>{"use strict";var t={264:()=>{var t=function(){function t(){}return t.prototype.loadVideo=function(t,e){return new Promise((function(o,n){try{console.log("Loading video: ".concat(t," - ").concat(e)),o({videoId:t,title:e})}catch(t){console.error("Error loading video: ".concat(t)),n(t)}}))},t.prototype.setupThumbnailHandlers=function(){var t=this;console.log("Setting up YouTube thumbnail handlers"),window.handleThumbnailClick=function(e){t.handleThumbnailClick(e)}},t.prototype.handleThumbnailClick=function(t){var e=new CustomEvent("thumbnail-click",{detail:{index:t},bubbles:!0,cancelable:!0});document.dispatchEvent(e)},t}();window.YouTubePlayer=new t},441:function(){var t=this&&this.__spreadArray||function(t,e,o){if(o||2===arguments.length)for(var n,i=0,r=e.length;i<r;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))},e=function(){function e(t){this.observer=null,this.options={avatarPlaceholder:t.avatarPlaceholder,defaultWidth:t.defaultWidth||40,defaultHeight:t.defaultHeight||40}}return e.prototype.initialize=function(){console.log("Initializing placeholder image blocking system"),this.interceptNetworkRequests(),this.processExistingImages(),this.setupMutationObserver(),this.unregisterServiceWorkers()},e.prototype.interceptNetworkRequests=function(){var e=window.fetch;window.fetch=function(t,o){return t&&t.toString().includes("placeholder.com")?(console.log("Blocked fetch request to placeholder.com:",t),Promise.resolve(new Response(new Blob([""],{type:"text/plain"}),{status:200,statusText:"Blocked by Anvil"}))):e.apply(window,[t,o])};var o=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(e,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(n&&n.toString().includes("placeholder.com"))return console.log("Blocked XHR request to placeholder.com:",n),void this.abort();o.apply(this,t([e,n],i,!0))}},e.prototype.generatePlaceholder=function(t,e){if(40===t&&40===e)return"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='".concat(t,"' height='").concat(e,"' viewBox='0 0 ").concat(t," ").concat(e,"'%3E%3Crect width='").concat(t,"' height='").concat(e,"' fill='%23cccccc'/%3E%3C/svg%3E");var o=Math.max(12,Math.min(24,t/10));return"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='".concat(t,"' height='").concat(e,"' viewBox='0 0 ").concat(t," ").concat(e,"'%3E%3Crect width='").concat(t,"' height='").concat(e,"' fill='%23cccccc'/%3E%3Ctext x='50%25' y='50%25' font-family='Arial' font-size='").concat(o,"' text-anchor='middle' fill='%23666666'%3E").concat(t,"x").concat(e,"%3C/text%3E%3C/svg%3E")},e.prototype.replaceImgSrc=function(t){if(t.src&&t.src.includes("placeholder.com")){var e=t.src.match(/placeholder\.com\/(\d+)x(\d+)/),o=e?parseInt(e[1]):this.options.defaultWidth,n=e?parseInt(e[2]):this.options.defaultHeight;t.src=this.generatePlaceholder(o,n),t.setAttribute("data-original-src","blocked-placeholder")}},e.prototype.processExistingImages=function(){var t=this;document.querySelectorAll("img").forEach((function(e){return t.replaceImgSrc(e)}))},e.prototype.setupMutationObserver=function(){var t=this;this.observer=new MutationObserver((function(e){e.forEach((function(e){e.addedNodes&&e.addedNodes.forEach((function(e){"IMG"===e.nodeName&&t.replaceImgSrc(e),e.querySelectorAll&&e.querySelectorAll("img").forEach((function(e){return t.replaceImgSrc(e)}))})),"attributes"===e.type&&"src"===e.attributeName&&"IMG"===e.target.nodeName&&t.replaceImgSrc(e.target)}))})),this.observer.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["src"]})},e.prototype.unregisterServiceWorkers=function(){"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then((function(t){t.forEach((function(t){t.scope.includes(window.location.origin)&&t.unregister()}))}))},e.prototype.cleanup=function(){this.observer&&(this.observer.disconnect(),this.observer=null)},e}();window.PlaceholderHandler=e},717:function(){var t=this&&this.__assign||function(){return t=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},t.apply(this,arguments)},e=this&&this.__spreadArray||function(t,e,o){if(o||2===arguments.length)for(var n,i=0,r=e.length;i<r;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))},o=function(){function o(e){this.videos=[],this.container=null,this.options=t(t({},e),{maxVideos:e.maxVideos||12,columns:e.columns||3}),this.initialize()}return o.prototype.initialize=function(){this.container=document.querySelector(this.options.containerSelector),this.container?this.applyGridStyling():console.error("YouTubeGrid: Container element not found with selector ".concat(this.options.containerSelector))},o.prototype.applyGridStyling=function(){this.container&&(this.container.style.display="grid",this.container.style.gridTemplateColumns="repeat(auto-fill, minmax(240px, 1fr))",this.container.style.gap="20px",this.container.style.padding="20px",this.container.style.width="100%")},o.prototype.updateGrid=function(t){this.videos=t.slice(0,this.options.maxVideos),this.render()},o.prototype.createThumbnailHTML=function(t,e){var o=t.id||"",n=t.title||"Untitled video",i=t.thumbnail_url||this.options.defaultThumbnail;return'\n      <div class="thumbnail-container" data-index="'.concat(e,'" data-video-id="').concat(o,'" onclick="handleThumbnailClick(').concat(e,')">\n        <img src="').concat(i,'" alt="').concat(n,'" class="thumbnail-image" \n          onerror="this.onerror=null; this.src=\'').concat(this.options.defaultThumbnail,'\'">\n        <p class="video-title">').concat(n,"</p>\n      </div>\n    ")},o.prototype.createEmptyStateHTML=function(){return'\n      <div style="text-align: center; padding: 40px; width: 100%;">\n        <div style="border: 1px solid #e0e0e0; border-radius: 8px; padding: 30px; background-color: #f8f9fa; display: inline-block; max-width: 600px;">\n          <h3 style="color: #6c757d; margin-bottom: 15px;">No Videos Found</h3>\n          <p style="color: #6c757d;">Enter a search term and connect to the YouTube API to display real video results.</p>\n          <p style="color: #6c757d; font-size: 0.9em; margin-top: 15px;">This application does not display pre-loaded dummy videos.</p>\n        </div>\n      </div>\n    '},o.prototype.render=function(){var t=this;if(this.container)if(this.container.innerHTML="",0!==this.videos.length){var e="";this.videos.forEach((function(o,n){e+=t.createThumbnailHTML(o,n)})),this.container.innerHTML=e,this.options.onThumbnailClick&&this.setupClickHandlers()}else this.container.innerHTML=this.createEmptyStateHTML()},o.prototype.setupClickHandlers=function(){var t=this;this.container&&this.container.querySelectorAll(".thumbnail-container").forEach((function(e){e.addEventListener("click",(function(e){var o=e.currentTarget,n=parseInt(o.getAttribute("data-index")||"0"),i=o.getAttribute("data-video-id")||"";t.options.onThumbnailClick&&t.options.onThumbnailClick(n,i)}))}))},o.prototype.getVideos=function(){return e([],this.videos,!0)},o.prototype.getVideoAt=function(t){return t>=0&&t<this.videos.length?this.videos[t]:null},o}();window.YouTubeGrid=o}},e={};function o(n){var i=e[n];if(void 0!==i)return i.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,o),r.exports}var n={};return(()=>{var t,e=n;Object.defineProperty(e,"__esModule",{value:!0}),o(441),o(264),o(717),function(t){t.initialize=function(t){console.log("Initializing AnvilYouTube with TypeScript"),window.AnvilYouTube={onVideoSearch:function(t){console.log("Received video search results:",t);var e=new CustomEvent("anvil-youtube-search",{detail:{videos:t},bubbles:!0,cancelable:!0});return document.dispatchEvent(e),!0},onError:function(t){console.error("YouTube error:",t);var e=new CustomEvent("anvil-youtube-error",{detail:{error:t},bubbles:!0,cancelable:!0});return document.dispatchEvent(e),!0}},console.log("Communication bridge set up between TypeScript and Python")}}(t||(t={})),window.AnvilYouTube=t,console.log("YouTube TypeScript module loaded")})(),n})()));
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PlaceholderHandler=t():e.PlaceholderHandler=t()}(this,(()=>(()=>{"use strict";return{441:function(){var e=this&&this.__spreadArray||function(e,t,o){if(o||2===arguments.length)for(var r,c=0,n=t.length;c<n;c++)!r&&c in t||(r||(r=Array.prototype.slice.call(t,0,c)),r[c]=t[c]);return e.concat(r||Array.prototype.slice.call(t))},t=function(){function t(e){this.observer=null,this.options={avatarPlaceholder:e.avatarPlaceholder,defaultWidth:e.defaultWidth||40,defaultHeight:e.defaultHeight||40}}return t.prototype.initialize=function(){console.log("Initializing placeholder image blocking system"),this.interceptNetworkRequests(),this.processExistingImages(),this.setupMutationObserver(),this.unregisterServiceWorkers()},t.prototype.interceptNetworkRequests=function(){var t=window.fetch;window.fetch=function(e,o){return e&&e.toString().includes("placeholder.com")?(console.log("Blocked fetch request to placeholder.com:",e),Promise.resolve(new Response(new Blob([""],{type:"text/plain"}),{status:200,statusText:"Blocked by Anvil"}))):t.apply(window,[e,o])};var o=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(t,r){for(var c=[],n=2;n<arguments.length;n++)c[n-2]=arguments[n];if(r&&r.toString().includes("placeholder.com"))return console.log("Blocked XHR request to placeholder.com:",r),void this.abort();o.apply(this,e([t,r],c,!0))}},t.prototype.generatePlaceholder=function(e,t){if(40===e&&40===t)return"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='".concat(e,"' height='").concat(t,"' viewBox='0 0 ").concat(e," ").concat(t,"'%3E%3Crect width='").concat(e,"' height='").concat(t,"' fill='%23cccccc'/%3E%3C/svg%3E");var o=Math.max(12,Math.min(24,e/10));return"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='".concat(e,"' height='").concat(t,"' viewBox='0 0 ").concat(e," ").concat(t,"'%3E%3Crect width='").concat(e,"' height='").concat(t,"' fill='%23cccccc'/%3E%3Ctext x='50%25' y='50%25' font-family='Arial' font-size='").concat(o,"' text-anchor='middle' fill='%23666666'%3E").concat(e,"x").concat(t,"%3C/text%3E%3C/svg%3E")},t.prototype.replaceImgSrc=function(e){if(e.src&&e.src.includes("placeholder.com")){var t=e.src.match(/placeholder\.com\/(\d+)x(\d+)/),o=t?parseInt(t[1]):this.options.defaultWidth,r=t?parseInt(t[2]):this.options.defaultHeight;e.src=this.generatePlaceholder(o,r),e.setAttribute("data-original-src","blocked-placeholder")}},t.prototype.processExistingImages=function(){var e=this;document.querySelectorAll("img").forEach((function(t){return e.replaceImgSrc(t)}))},t.prototype.setupMutationObserver=function(){var e=this;this.observer=new MutationObserver((function(t){t.forEach((function(t){t.addedNodes&&t.addedNodes.forEach((function(t){"IMG"===t.nodeName&&e.replaceImgSrc(t),t.querySelectorAll&&t.querySelectorAll("img").forEach((function(t){return e.replaceImgSrc(t)}))})),"attributes"===t.type&&"src"===t.attributeName&&"IMG"===t.target.nodeName&&e.replaceImgSrc(t.target)}))})),this.observer.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["src"]})},t.prototype.unregisterServiceWorkers=function(){"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then((function(e){e.forEach((function(e){e.scope.includes(window.location.origin)&&e.unregister()}))}))},t.prototype.cleanup=function(){this.observer&&(this.observer.disconnect(),this.observer=null)},t}();window.PlaceholderHandler=t}}[441](),{}})()));